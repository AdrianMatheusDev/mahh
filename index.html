<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Bem-vinda, Mariane! 💚</title>
<meta name="color-scheme" content="light">

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Poppins:wght@600;700&family=Pacifico&display=swap" rel="stylesheet">

<style>
:root{
  --bg-900:#030404;
  --panel: rgba(10,12,11,0.72);
  --accent:#00e676;
  --accent-2:#43a047;
  --muted:#9fbca6;
  --glass-border: rgba(67,160,71,0.06);
  --sombra: 0 12px 40px rgba(0,0,0,0.7);
  --card-w:720px;
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;background:linear-gradient(180deg,#060606 0%,#081010 60%);color:var(--muted);font-family:Inter,system-ui,Arial,sans-serif}
a{color:inherit}
button{font-family:inherit}

/* CSS wallpaper (lightweight, GPU-friendly) */
#cssWallpaper{position:fixed;inset:0;z-index:0;pointer-events:none;overflow:hidden;mix-blend-mode:screen;opacity:0.98;transform:translateZ(0); transition: transform 0.1s linear;}
.parallax-layer { position: absolute; inset: 0; transition: transform 0.3s ease-out; }
#cssWallpaper .nebula{
  position:absolute;inset:-10% -20% -10% -20%;
  background:
    radial-gradient(50% 40% at 30% 35%, rgba(0,200,160,0.08), rgba(0,0,0,0) 30%),
    radial-gradient(60% 50% at 70% 45%, rgba(120,40,200,0.06), rgba(0,0,0,0) 34%);
  filter:blur(36px) saturate(120%);
  animation:nebulaMove 32s ease-in-out infinite;
  will-change:transform,filter;
}
@keyframes nebulaMove{0%{transform:translate(-1.5%,0)}50%{transform:translate(1.5%,-1%)}100%{transform:translate(-1.5%,0)}}

#cssWallpaper .cloud{position:absolute;filter:blur(36px);opacity:.9;will-change:transform}
#cssWallpaper .cloud.c1{left:-12%;top:6%;width:70%;height:22%;background:radial-gradient(50% 60% at 30% 45%,rgba(18,22,30,0.22),rgba(18,22,30,0.06) 50%,transparent 70%);animation:cloudMove 40s linear infinite}
#cssWallpaper .cloud.c2{left:18%;top:2%;width:80%;height:26%;background:radial-gradient(50% 60% at 40% 45%,rgba(18,22,30,0.22),rgba(18,22,30,0.07) 50%,transparent 70%);animation:cloudMove 46s linear infinite reverse}
#cssWallpaper .cloud.c3{left:8%;top:12%;width:60%;height:20%;background:radial-gradient(50% 60% at 40% 45%,rgba(18,22,30,0.18),transparent 60%);animation:cloudMove 52s linear infinite}
@keyframes cloudMove{0%{transform:translateX(0)}100%{transform:translateX(8%)}}

/* stars (soft, twinkle) */
#cssWallpaper .stars {position:absolute;inset:0;z-index:2;}
.s { --size: 4px; position: absolute; transform: rotate(-45deg); }
.s-inner { width: var(--size); height: var(--size); animation: starTwinkle 4s infinite ease-in-out; position: relative; }
.s-inner::before, .s-inner::after {
  content: "";
  position: absolute;
  width: var(--size);
  height: var(--size);
  border-radius: 50%;
  background: radial-gradient(circle,rgba(255,255,255,1) 0%,rgba(255,240,220,0.6) 40%,rgba(255,240,220,0) 60%);
  mix-blend-mode: screen;
}
.s-inner::before { top: calc(var(--size) * -0.5); }
.s-inner::after { left: calc(var(--size) * 0.5); }
@keyframes starTwinkle{0%{opacity:.15;transform:scale(.6);filter:blur(.8px)}50%{opacity:1;transform:scale(1.05);filter:blur(0)}100%{opacity:.15;transform:scale(.6);filter:blur(.8px)}}

/* hearts (pulsing shapes) */
#cssWallpaper .hearts{position:absolute;inset:0;z-index:3;pointer-events:none}
#cssWallpaper .heart{--size:18px;position:absolute;width:var(--size);height:var(--size);transform:rotate(-45deg);opacity:.9;background:linear-gradient(180deg,#ffd6e6,#ff8fb8);}
#cssWallpaper .heart::before, #cssWallpaper .heart::after {content:"";position:absolute;width:var(--size);height:var(--size);border-radius:50%;background:linear-gradient(180deg,#ffd6e6,#ff8fb8);}
#cssWallpaper .heart::before {top:-50%}
#cssWallpaper .heart::after {left:50%}
@keyframes heartPulse{0%{transform:rotate(-45deg) scale(.86);opacity:.6}50%{transform:rotate(-45deg) scale(1.12);opacity:1}100%{transform:rotate(-45deg) scale(.86);opacity:.6}}

/* main UI */
.container{position:relative;z-index:2;max-width:var(--card-w);margin:28px auto;padding:0 18px}
.main-card{background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));border-radius:20px;padding:28px;box-shadow:var(--sombra);backdrop-filter:blur(6px) saturate(120%);border:1px solid var(--glass-border);color:#eafaf0;text-align:center}
h1{color:var(--accent);font-family:Poppins,Pacifico,cursive;font-weight:700;font-size:2rem;margin:0 0 6px}
.subtitle{color:var(--muted);font-size:1rem;margin-bottom:12px}
.heart-emoji{font-size:2rem;margin-bottom:8px;animation:heartPulse 2.6s infinite}
.check-area{display:flex;gap:12px;align-items:center;justify-content:center;margin-top:8px}
.check-area input{width:18px;height:18px}
.btn{background:linear-gradient(90deg,rgba(0,230,118,0.12) 30%, rgba(67,160,71,0.06) 100%);color:var(--accent);border:1px solid rgba(0,230,118,0.12);padding:10px 18px;border-radius:12px;cursor:pointer;font-weight:600;transition: opacity 0.2s, background 0.2s;}
.btn:hover:not(:disabled) {
  transform: scale(1.05);
  box-shadow: 0 0 15px rgba(0, 230, 118, 0.2);
}
.btn:active:not(:disabled) { transform: scale(0.98); }
.btn:disabled{opacity:.45;cursor:not-allowed}
.parabens{margin-top:12px;color:#dfffe6;font-weight:600}
 
/* main content hidden initially */
.main-content{display:none;flex-direction:column;gap:14px;margin-top:18px}

/* sections */
section{
  position: relative;
  background:linear-gradient(180deg,rgba(255,255,255,0.01),rgba(0,0,0,0.06));padding:16px;border-radius:12px;text-align:left; 
  transition: opacity 0.6s ease-out, transform 0.6s ease-out; 
  opacity: 0; transform: translateY(20px);
  overflow: hidden; /* Para conter o brilho */
}
.actions-grid section {
  --angle: 0deg;
  border: 1px solid;
  border-image: conic-gradient(from var(--angle), transparent 20%, var(--accent), transparent 80%) 1;
  animation: border-spin 3s linear infinite;
}
@keyframes border-spin { to { --angle: 360deg; } }
@property --angle { syntax: '<angle>'; initial-value: 0deg; inherits: false; }

.actions-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 16px;
  margin-top: 24px;
}
.modal-container {
  position: fixed; inset: 0; z-index: 1000;
  display: flex; align-items: center; justify-content: center;
  background: rgba(0,0,0,0.6); backdrop-filter: blur(4px);
}

/* Countdown Timer Styles */
.countdown-container {
  text-align: center;
  margin-top: 24px;
}
.countdown-title {
  color: var(--accent-2);
  font-family: 'Pacifico', cursive;
  font-size: 1.3em;
  margin-bottom: 16px;
}
.cronometro-wrapper {
  display: flex;
  justify-content: center;
  gap: 15px;
}
.time-unit {
  background: linear-gradient(180deg,rgba(0,0,0,0.45),rgba(255,255,255,0.02));
  padding: 10px 15px;
  border-radius: 12px;
  min-width: 70px;
}
.time-unit span { font-size: 2em; color: var(--accent); font-weight: 700; display: block; }
.time-unit label { font-size: 0.8em; color: var(--muted); }

/* small responsive */
@media(max-width:720px){h1{font-size:1.4rem}.container{margin:16px}}

/* Otimização do modal de jogo para mobile */
@media(max-width: 520px) {
  #modalJoguinho > div {
    width: 100%; height: 100%; border-radius: 0;
  }
  #modalJoguinho canvas {
    width: 100% !important; /* Faz o canvas do jogo ocupar a largura total */
    width: 100%; height: auto; /* Faz o canvas do jogo ocupar a largura total */
  }
  /* Reduz animações de fundo em mobile para performance */
  .s.s1, .s.s3, .s.s5, .s.s7, .s.s9, .s.s11, .s.s13, .s.s15,
  .heart.h2, .heart.h4, .heart.h6, .heart.h8, .heart.h10 {
    display: none;
  }
  .actions-grid {
    grid-template-columns: 1fr; /* Coluna única em telas muito pequenas */
  }
}
/* Cursor Sparkle Effect */
.sparkle {
    position: fixed;
    width: 8px;
    height: 8px;
    background-color: var(--accent);
    border-radius: 50%;
    pointer-events: none;
    z-index: 9999;
    opacity: 0;
    animation: sparkle-anim 0.6s forwards;
}
@keyframes sparkle-anim {
    0% { transform: scale(1); opacity: 1; }
    100% { transform: scale(0); opacity: 0; }
}

/* Shooting Star */
.shooting-star {
    position: absolute;
    height: 2px;
    background: linear-gradient(-45deg, rgba(0, 230, 118, 1), rgba(0, 0, 0, 0));
    border-radius: 999px;
    filter: drop-shadow(0 0 6px rgba(0, 230, 118, 0.8));
    animation: shooting-star-anim 3s ease-in-out infinite;
}
@keyframes shooting-star-anim {
    0% { transform: translateX(0) translateY(0) rotate(-45deg); opacity: 1; }
    100% { transform: translateX(-1000px) translateY(1000px) rotate(-45deg); opacity: 0; }
}

/* Transition Animation */
#transition-overlay {
    position: fixed;
    inset: 0;
    background: radial-gradient(circle, rgba(3, 4, 4, 0.6) 0%, rgba(3, 4, 4, 0.98) 80%);
    z-index: 2000;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.4s ease-in-out;
}
#transition-overlay.visible {
    opacity: 1;
    pointer-events: all;
}
.transition-heart {
    font-size: 10rem;
    color: #ff8fb8;
    text-shadow: 0 0 20px #ff8fb8, 0 0 40px #ff8fb8;
    animation: pulsing-heart-transition 2.5s ease-in-out forwards;
    transform: scale(0);
}
@keyframes pulsing-heart-transition {
    0% { transform: scale(0); opacity: 0; }
    30% { transform: scale(1.1); opacity: 1; }
    50% { transform: scale(0.95); }
    70% { transform: scale(1.05); }
    100% { transform: scale(1); opacity: 1; }
}
@keyframes heart-flee {
    0% { left: 5%; }
    100% { left: 115%; }
}

.walking-duck {
    position: fixed; bottom: 5px; font-size: 2rem; z-index: 1001; animation: heart-flee 12s linear infinite;
    0% { left: 5%; }
    100% { left: 115%; }
}

/* Game Performance Optimization */
body.game-active #cssWallpaper .nebula,
body.game-active #cssWallpaper .cloud,
body.game-active #cssWallpaper .s-inner,
body.game-active #cssWallpaper .heart,
body.game-active .actions-grid section {
    animation-play-state: paused;
}
body.game-active .dog-body-group,
body.game-active .dog-tongue {
    animation-play-state: paused !important;
}

/* utility */
.hidden{display:none}

/* Looking Dog */
.looking-dog {
    position: relative;
    width: 110px; /* Ajuste de tamanho */
    height: 90px; /* Ajuste de tamanho */
    cursor: pointer;
    margin: 0 auto; /* Centraliza o cachorro */
}
.dog-mission {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 5px;
    margin-top: 10px; /* Espaço abaixo do cachorro */
}
.dog-food-bowl { font-size: 2.5rem; cursor: pointer; transition: transform 0.3s, opacity 0.3s; }
.dog-food-bowl:hover { transform: scale(1.1); }
.dog-food-bowl.fed { opacity: 0.5; cursor: not-allowed; transform: scale(0.9); }
.dog-streak { font-weight: bold; color: #ffc107; text-shadow: 0 0 5px #ff9800; }

.dog-pupil {
    /* Transição suave para o movimento dos olhos */
    transition: transform 0.2s ease-out;
}
.looking-dog svg {
    width: 100%; height: 100%;
}
/* Animação de pulo do cachorro */
@keyframes dog-jump {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-15px); }
}
/* Animação de carinho no cachorro */
@keyframes dog-pet {
    0%, 100% { transform: rotate(0deg); }
    25% { transform: rotate(-8deg); }
    75% { transform: rotate(8deg); }
}
/* Animação de comer */
@keyframes dog-eat {
    0%, 100% { transform: translateY(0); }
    25%, 75% { transform: translateY(5px) rotate(3deg); }
    50% { transform: translateY(0) rotate(-3deg); }
}
/* Animação de respiração do cachorro */
@keyframes dog-breathe {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-2px); }
}
.dog-body-group { animation: dog-breathe 3.5s ease-in-out infinite; }
</style>
</head>
<body>
  <div id="cssWallpaper" aria-hidden="true">
    <div class="parallax-layer" data-speed="1"><div class="nebula"></div></div>
    <div class="parallax-layer" data-speed="2">
      <div class="clouds" aria-hidden="true">
        <div class="cloud c1"></div>
        <div class="cloud c2"></div>
        <div class="cloud c3"></div>
      </div>
    </div>
    <div class="parallax-layer" data-speed="4">
      <div class="stars" aria-hidden="true">
        <span class="s s1" style="left:6%;top:12%;"><div class="s-inner" style="animation-delay:0s;transform:scale(.7)"></div></span>
        <span class="s s2" style="left:18%;top:36%;"><div class="s-inner" style="animation-delay:.6s;transform:scale(.9)"></div></span>
        <span class="s s3" style="left:34%;top:22%;"><div class="s-inner" style="animation-delay:1.2s;transform:scale(.6)"></div></span>
        <span class="s s4" style="left:48%;top:10%;"><div class="s-inner" style="animation-delay:.9s;transform:scale(1.1)"></div></span>
        <span class="s s5" style="left:62%;top:26%;"><div class="s-inner" style="animation-delay:2.1s;transform:scale(.8)"></div></span>
        <span class="s s6" style="left:76%;top:18%;"><div class="s-inner" style="animation-delay:1.8s;transform:scale(.6)"></div></span>
        <span class="s s7" style="left:88%;top:6%;"><div class="s-inner" style="animation-delay:0.2s;transform:scale(.9)"></div></span>
        <span class="s s8" style="left:12%;top:68%;"><div class="s-inner" style="animation-delay:2.6s;transform:scale(.7)"></div></span>
        <span class="s s9" style="left:40%;top:58%;"><div class="s-inner" style="animation-delay:1.1s;transform:scale(.6)"></div></span>
        <span class="s s10" style="left:55%;top:70%;"><div class="s-inner" style="animation-delay:2.9s;transform:scale(.8)"></div></span>
        <span class="s s11" style="left:72%;top:50%;"><div class="s-inner" style="animation-delay:.4s;transform:scale(.7)"></div></span>
        <span class="s s12" style="left:84%;top:72%;"><div class="s-inner" style="animation-delay:3.1s;transform:scale(.5)"></div></span>
        <span class="s s13" style="left:28%;top:78%;"><div class="s-inner" style="animation-delay:1.9s;transform:scale(.6)"></div></span>
        <span class="s s14" style="left:6%;top:48%;"><div class="s-inner" style="animation-delay:2.3s;transform:scale(.9)"></div></span>
        <span class="s s15" style="left:92%;top:40%;"><div class="s-inner" style="animation-delay:0.7s;transform:scale(.6)"></div></span>
      </div>
    </div>
    <div class="parallax-layer" data-speed="3">
      <div class="hearts" aria-hidden="true">
        <span class="heart h1" style="left:14%;top:20%;--size:26px;animation:heartPulse 3.2s infinite .2s"></span>
        <span class="heart h2" style="left:33%;top:36%;--size:20px;animation:heartPulse 4s infinite .7s"></span>
        <span class="heart h3" style="left:52%;top:18%;--size:22px;animation:heartPulse 3.6s infinite 1.1s"></span>
        <span class="heart h4" style="left:70%;top:30%;--size:18px;animation:heartPulse 3.8s infinite .4s"></span>
        <span class="heart h5" style="left:82%;top:12%;--size:24px;animation:heartPulse 4.4s infinite 1.8s"></span>
        <span class="heart h6" style="left:60%;top:48%;--size:16px;animation:heartPulse 3.1s infinite .6s"></span>
        <span class="heart h7" style="left:8%;top:55%;--size:20px;animation:heartPulse 3.5s infinite 1.5s"></span>
        <span class="heart h8" style="left:90%;top:60%;--size:22px;animation:heartPulse 4.2s infinite 0.1s"></span>
        <span class="heart h9" style="left:25%;top:70%;--size:16px;animation:heartPulse 3.0s infinite 2.2s"></span>
        <span class="heart h10" style="left:75%;top:80%;--size:28px;animation:heartPulse 4.8s infinite 0.9s"></span>
      </div>
    </div>
  </div>

  <!-- Transition Overlay -->
  <div id="transition-overlay" class="hidden">
    <div class="transition-heart">❤️</div>
  </div>

  <div class="container">
    <div class="main-card" id="introBox" role="dialog" aria-modal="true" aria-labelledby="welcomeTitle">
      <h1 id="welcomeTitle">Bem-vinda, Mariane!</h1>
      <div class="heart-emoji">💚</div>
      <div class="subtitle" style="margin-bottom: 24px;">Esse site é só pra você! ✨</div>
      
      <button id="btnEntrar" type="button" class="btn">Entrar 👉</button>

      <div id="parabensMsg" class="parabens hidden">🎉 Que bom que é você! Preparando a surpresa...</div>
    </div>

    <div class="main-card main-content" id="mainContent">
      <h1 style="margin-top:6px">Bem-vinda, Mariane! 💚</h1>
      <div style="display:flex;gap:16px;align-items:center">
        <img src="https://i.ibb.co/9HtnZ5PN/mm.jpg" alt="Mariane" style="width:96px;height:96px;border-radius:50%;object-fit:cover;border:4px solid rgba(0,230,118,0.12)">
        <div style="text-align:left">
          <div style="font-weight:700;color:#eafaf0">Mariane</div>
          <div style="color:var(--muted)">olha só quanto tempo eu e tu ta firme e forte! ⏳</div>
        </div>      
      </div>

      <div class="countdown-container">
        <div class="countdown-title">nósso tempinho 🥺...</div>
        <div class="cronometro-wrapper" id="cronometro">
          <div class="time-unit"><span id="days">0</span><label>Dias</label></div>
          <div class="time-unit"><span id="hours">0</span><label>Horas</label></div>
          <div class="time-unit"><span id="minutes">0</span><label>Minutos</label></div>
          <div class="time-unit"><span id="seconds">0</span><label>Segundos</label></div>
        </div>
      </div>

      <div class="actions-grid">
        <section id="conversa" style="--angle: 45deg;">
          <h3 style="color:var(--accent-2);margin-bottom:12px">💬 Preciso conversar</h3>
          <a class="btn" href="https://wa.me/5514998889412?text=Quero%20conversar%20com%20você%20agora.%20💬" target="_blank" rel="noreferrer">Abrir conversa</a>
        </section>

        <section id="triste">
          <h3 style="color:var(--accent-2);margin-bottom:12px">😢 Estou triste</h3>
          <a class="btn" href="https://wa.me/5514998889412?text=Estou%20me%20sentindo%20triste%20agora.%20Pode%20falar%20com%20mim%3F%20😢" target="_blank" rel="noreferrer">Enviar mensagem</a>
        </section>

        <section id="conselho">
          <h3 style="color:var(--accent-2);margin-bottom:12px">💡 Quero um conselho</h3>
          <a class="btn" href="https://wa.me/5514998889412?text=Me%20dá%20um%20conselho%20por%20favor%3F%20🙏" target="_blank" rel="noreferrer">Pedir conselho</a>
        </section>

        <section id="joguinho-section" style="--angle: 135deg;">
          <h3 style="color:var(--accent-2);margin-bottom:12px">🎮 Joguinhos</h3>
          <div style="display: flex; gap: 10px; justify-content: center; flex-wrap: wrap;">
            <button id="btnAbrirFlapBird" class="btn">Flap Bird</button>
            <button id="btnAbrirDinoDuck" class="btn">Corrida da Mariane</button>
          </div>
        </section>

        <section id="elogio-section" style="--angle: 225deg;">
          <h3 style="color:var(--accent-2);margin-bottom:12px">💖 Gerar um elogio</h3>
          <button id="abrirElogioFromSection" class="btn">Gerar elogio</button>
        </section>

        <section id="dog-section" style="--angle: 315deg; text-align: center;">
          <h3 style="color:var(--accent-2);margin-bottom:12px; display: flex; align-items: center; justify-content: center; gap: 8px;">
            Nosso Auau
            <span id="dog-info-icon" title="Regras do Auau" style="cursor: pointer; font-size: 0.7em; color: var(--muted); border: 1px solid var(--muted); border-radius: 50%; width: 1.5em; height: 1.5em; line-height: 1.5em; display: inline-block; transition: all 0.2s;">ⓘ</span>
          </h3>
          <!-- Cachorro observador -->
          <div id="looking-dog" class="looking-dog">
            <svg viewBox="-20 -15 160 145" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <defs>
                <filter id="dog-shadow" x="-20%" y="-20%" width="140%" height="140%"><feDropShadow dx="0" dy="4" stdDeviation="4" flood-color="#000" flood-opacity="0.3"/></filter>
                <linearGradient id="pot-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                  <stop offset="0%" style="stop-color:#c0c0c0;stop-opacity:1" />
                  <stop offset="100%" style="stop-color:#808080;stop-opacity:1" />
                </linearGradient>
              </defs>
              <g class="dog-body-group" transform="translate(5, 35) scale(0.9)">
                <path d="M 105,75 C 115,45 100,10 80,-2 C 60,-15 40,-15 20,-2 C 0,10 -15,45 -5,75 V 90 H 105 Z" fill="#D2B48C" stroke="#A0522D" stroke-width="2.5"/><path d="M -10,30 C -10,5 10,-15 25,-10 C 35,-7 30,15 20,35 Z" fill="#B59878" stroke="#A0522D" stroke-width="2"/><path d="M 120,30 C 120,5 100,-15 85,-10 C 75,-7 80,15 90,35 Z" fill="#B59878" stroke="#A0522D" stroke-width="2"/>
                <path d="M 55,40 m -20,0 a 20,10 0 1,0 40,0" fill="#F5DEB3" stroke="#A0522D" stroke-width="2"/><path d="M 55,45 m -5,0 a 5,8 0 1,1 10,0" fill="#44281d" stroke="black" stroke-width="1"/><g id="dog-eyes" transform="translate(-5, 5)"><ellipse cx="43" cy="25" rx="9" ry="11" fill="white" stroke="#555" stroke-width="1"/><ellipse cx="72" cy="25" rx="9" ry="11" fill="white" stroke="#555" stroke-width="1"/><circle class="dog-pupil" cx="43" cy="25" r="4.5" fill="#222"/><circle class="dog-pupil" cx="72" cy="25" r="4.5" fill="#222"/></g>
                <g transform="translate(80, 60) rotate(15) scale(0.2)"> <path d="M 42.5,23.5c-6.2,0-11.7,3.6-14.5,8.9c-1.8,3.5-2.3,7.6-1.7,11.6c0.6,4,2.4,7.6,5,10.5c2.7,2.9,6.3,4.9,10.4,5.6 c4.1,0.7,8.1-0.5,11.5-2.3c3.5-1.8,6.5-4.7,8.5-8.5c2-3.8,3-8.1,2.3-12.4c-0.6-4.2-2.4-8.1-5.1-11.3C66.1,25.3,59.5,21.4,42.5,23.5z" fill="#A0522D" stroke="#8B4513" stroke-width="3"/> </g>
              </g>
              <!-- Panela (retângulo simples) -->
              <rect x="-5" y="90" width="120" height="30" rx="5" fill="url(#pot-gradient)" stroke="#555" stroke-width="1.5" filter="url(#dog-shadow)"/>
              <!-- Iniciais na Panela -->
              <text x="55" y="108" font-family="Poppins, sans-serif" font-size="14" font-weight="600" fill="#666" text-anchor="middle">A M</text>
              <rect x="-20" y="92" width="20" height="12" rx="4" fill="#444" />
              <!-- Patinhas na borda -->
              <path d="M 35,85 a 10 10 0 0 1 20 0 v 5 a 10 10 0 0 1 -20 0 z" fill="#D2B48C" stroke="#A0522D" stroke-width="2"/>
              <path d="M 65,85 a 10 10 0 0 1 20 0 v 5 a 10 10 0 0 1 -20 0 z" fill="#D2B48C" stroke="#A0522D" stroke-width="2"/>
            </svg>
          </div>
          <!-- Missão do Cachorro -->
          <div class="dog-mission">
            <div id="dog-food-bowl" class="dog-food-bowl" title="Alimentar o cachorrinho">🥣</div>
            <div class="dog-streak"><span id="dog-streak-count">0</span> 🔥</div>
          </div>
        </section>

      </div>

      <section id="abra-quando-section" style="margin-top: 24px; text-align: center;">
        <h3 style="color:var(--accent-2);margin-bottom:16px">💌 Cartas "Abra Quando..."</h3>
        <div class="letter-buttons" style="display: flex; flex-wrap: wrap; gap: 10px; justify-content: center;">
            <button class="btn" data-letter="saudades">...sentir saudades</button>
            <button class="btn" data-letter="desanimada">...estiver desanimada</button>
            <button class="btn" data-letter="feliz">...estiver muito feliz</button>
        </div>
      </section>

      <div style="display:flex;gap:10px;align-items:center;margin-top:24px;justify-content:center; flex-wrap: wrap;">
          <button class="btn" id="abrirSegredo">🔒 Segredo do Adrian</button>
          <button class="btn" id="btnDicaSegredo">💡 Dica</button>
          <button class="btn" id="btnMomentoCerto" disabled>&lt;no momento certo&gt;</button>
      </div>

    </div>
  </div>

  <!-- Modals -->
  <div id="segredoModalBg" class="hidden modal-container" style="background:rgba(0,0,0,0.6)">
    <div style="background:linear-gradient(180deg,rgba(14,18,16,0.98),rgba(12,16,14,0.95));padding:20px;border-radius:12px;color:#dfffe6;min-width:260px;position:relative">
      <button id="fecharModal" class="btn" style="position:absolute;right:12px;top:12px">×</button>
      <div style="font-size:1.1em;margin-bottom:10px">Digite a palavra secreta:</div>
      <input id="inputSegredo" type="text" placeholder="Palavra secreta" style="display:block;margin:0 auto 10px auto;padding:8px;border-radius:8px;border:1px solid rgba(0,230,118,0.08);background:transparent;color:#eafaf0;text-align:center">
      <div id="erroSegredo" style="color:#ffb4b4;min-height:18px;text-align:center;display:none"></div>
      <div style="display:flex;gap:8px;justify-content:center;margin-top:8px">
        <button id="confirmarSegredo" class="btn">Acessar</button>
      </div>
    </div>
  </div>

  <div id="popupElogioBg" class="hidden modal-container">
    <div style="background:linear-gradient(180deg,rgba(14,18,16,0.98),rgba(12,16,14,0.95));color:#eafaf0;min-width:260px;border-radius:16px;padding:24px;text-align:center;box-shadow:var(--sombra);border:1px solid var(--glass-border);">
      <div style="font-size: 2.5em; margin-bottom: 12px;">💖</div>
      <div id="elogioMsg" style="margin-bottom:20px;color:var(--accent);font-size:1.2em;line-height:1.5;"></div>
      <button id="btnFecharElogio" class="btn">Que fofo!</button>
    </div>
  </div>

  <div id="popupDicaSegredoBg" class="hidden modal-container" style="background:rgba(0,0,0,0.45);">
    <div style="background:#fff;color:#043;min-width:260px;border-radius:12px;padding:18px;text-align:left;box-shadow:0 12px 40px rgba(0,0,0,0.4);max-width:90vw">
      <div style="color:#388e3c;font-size:1em;white-space:pre-line">
Íncrivel como tudo mudou num instante,
Nem deu tempo de entender o que senti.
Era pra ser só mais um dia normal,
Só que tu chegou.
Porque, sei lá, tem coisa que acontece sem motivo,
E tudo em ti tem esse jeito de surpresa boa.
Ri sem saber o porquê,
A vida virou bagunça boa,
De um jeito que eu não planejei,
O tipo de coisa que só o inesperado explica.
      </div>
      <div style="text-align:center;margin-top:12px">
        <button id="btnFecharDicaSegredo" class="btn">Fechar</button>
      </div>
    </div>
  </div>

  <div id="modalJoguinho" class="hidden modal-container" style="z-index:1100; background:rgba(0,0,0,0.45);">
    <div style="background:#fff;border-radius:12px;padding:12px;max-width:500px;width:94%;box-shadow:0 12px 40px rgba(0,0,0,0.4);position:relative;text-align:center">
      <button id="fecharJoguinho" class="btn" style="position:absolute;right:10px;top:10px; z-index: 10;">×</button>
      <div id="gameTitle" style="font-weight:700;margin-bottom:8px;color:#388e3c"></div>
      <button id="btnIniciarJogo" class="btn">Iniciar</button>
      <canvas id="flapCanvas" width="240" height="320" style="background:#a5d6a7;border-radius:12px;display:none;margin:12px auto;max-width:100%"></canvas>
      <canvas id="gameCanvas" width="480" height="200" style="background:#a5d6a7;border-radius:12px;display:none;margin:12px auto;max-width:100%"></canvas>
      <div id="gameMsg" style="color:#388e3c;font-family:Pacifico;margin-top:6px; line-height: 1.4;"></div>
    </div>
  </div>

  <div id="letterModal" class="hidden modal-container">
    <div style="background:linear-gradient(180deg,rgba(14,18,16,0.98),rgba(12,16,14,0.95));color:#eafaf0;min-width:280px;max-width: 90vw; width: 450px; border-radius:16px;padding:24px;text-align:center;box-shadow:var(--sombra);border:1px solid var(--glass-border);">
      <div id="letterEmoji" style="font-size: 2.5em; margin-bottom: 12px;"></div>
      <h3 id="letterTitle" style="color:var(--accent); margin-bottom: 16px; font-family: Pacifico, cursive;"></h3>
      <p id="letterContent" style="margin-bottom:20px;color:var(--muted);font-size:1.1em;line-height:1.6;"></p>
      <button id="btnFecharLetter" class="btn">Fechar</button>
    </div>
  </div>

  <div id="dogInfoModal" class="hidden modal-container">
    <div style="background:linear-gradient(180deg,rgba(14,18,16,0.98),rgba(12,16,14,0.95));color:#eafaf0;min-width:280px;max-width: 90vw; width: 450px; border-radius:16px;padding:24px;text-align:left;box-shadow:var(--sombra);border:1px solid var(--glass-border);">
      <div style="font-size: 2.5em; margin-bottom: 12px; text-align: center;">🐶</div>
      <h3 style="color:var(--accent); margin-bottom: 16px; font-family: Pacifico, cursive; text-align: center;">Regras do Auau</h3>
      <ul style="margin-bottom:20px;color:var(--muted);font-size:1.1em;line-height:1.6; padding-left: 20px;">
        <li>Alimente o auau <strong>uma vez por dia</strong> para manter a sequência.</li>
        <li>A alimentação fica disponível novamente à <strong>meia-noite (horário de Brasília)</strong>.</li>
        <li>Se você pular um dia, a sequência de dias (🔥) é <strong>zerada</strong>!</li>
        <li>Cuide bem dele! 😉</li>
      </ul>
      <div style="text-align: center;">
        <button id="btnFecharDogInfo" class="btn">Entendi!</button>
      </div>
    </div>
  </div>

<div class="walking-duck" aria-hidden="true">🦆</div>
<script>
document.addEventListener('DOMContentLoaded', () => {
  const $ = (selector) => document.querySelector(selector);
  const $$ = (selector) => document.querySelectorAll(selector);

    // --- Módulo de Som ---
    const playSound = (soundId) => {
        // Sons desativados a pedido do usuário.
    };
  // --- Módulo de Entrada ---
  const initIntro = () => {
    const btnEntrar = $('#btnEntrar');

    if (!btnEntrar) return;

    btnEntrar.addEventListener('click', () => {
      const introBox = $('#introBox');
      const mainContent = $('#mainContent');
      const parabensMsg = $('#parabensMsg');
      const transitionOverlay = $('#transition-overlay');

      btnEntrar.style.display = 'none';
      if (parabensMsg) parabensMsg.classList.remove('hidden');
      
      // Animação de saída da intro
      setTimeout(() => {
        if (introBox) {
          introBox.style.transition = 'opacity .9s';
          introBox.style.opacity = 0;
        }
        
        // Inicia a transição com o pato
        setTimeout(() => {
          if (introBox) introBox.style.display = 'none';
          if (transitionOverlay) {
            transitionOverlay.classList.remove('hidden');
            transitionOverlay.classList.add('visible');
          }

          // Espera a animação do pato terminar (2.8s) e então mostra o conteúdo
          setTimeout(() => {
            if (transitionOverlay) transitionOverlay.classList.remove('visible');
            
            if (mainContent) {
              mainContent.style.display = 'flex';
              mainContent.style.opacity = 0;
              setTimeout(() => {
                mainContent.style.transition = 'opacity .9s';
                mainContent.style.opacity = 1;
                // Inicia módulos que dependem do conteúdo principal
                initCronometro();
                initModals();
                initGames();
                initVisualEffects();
                $$('.main-content section').forEach((section, index) => {
                  setTimeout(() => { section.style.opacity = 1; section.style.transform = 'translateY(0)'; }, index * 100);
                });
              }, 400); // Pequeno delay para a transição ficar mais suave
            }
          }, 2500); // Duração da nova animação
        }, 500); // Delay após a intro sumir
      }, 600); // Delay após clicar no botão
    });
  };

  // --- Módulo do Cronômetro ---
  const initCronometro = () => {
    const daysEl = $('#days'), hoursEl = $('#hours'), minutesEl = $('#minutes'), secondsEl = $('#seconds');
    if (!daysEl || !hoursEl || !minutesEl || !secondsEl) return;

    const dataInicio = new Date(2025, 7, 12, 20, 39, 0); // Agosto é mês 7 (zero-based)
    let intervalId = null;

    const atualizarCronometro = () => {
      const agora = new Date();
      const diff = agora - dataInicio;

      if (diff < 0) { // Se a data ainda não chegou, zera o cronômetro
        daysEl.textContent = hoursEl.textContent = minutesEl.textContent = secondsEl.textContent = '0';
        return;
      }

      const d = Math.floor(diff / (1000 * 60 * 60 * 24));
      const h = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const m = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
      const s = Math.floor((diff % (1000 * 60)) / 1000);

      if (daysEl) daysEl.textContent = d;
      if (hoursEl) hoursEl.textContent = h.toString().padStart(2, '0');
      if (minutesEl) minutesEl.textContent = m.toString().padStart(2, '0');
      if (secondsEl) secondsEl.textContent = s.toString().padStart(2, '0');
    };

    if (intervalId) clearInterval(intervalId);
    atualizarCronometro();
    intervalId = setInterval(atualizarCronometro, 1000);
  };

  // --- Módulo de Modais (Genérico) ---
  const initModals = () => {
    // Função para abrir um modal
    const openModal = (modalId) => {
      const modal = $(modalId);
      if (modal) {
        modal.classList.remove('hidden');
      }
    };

    // Função para fechar um modal
    const closeModal = (modalId) => {
      const modal = $(modalId);
      if (modal) {
        modal.classList.add('hidden');
      }
    };

    // Elogio
    let typeIntervalElogio, typeIntervalLetterTitle, typeIntervalLetterContent;
    const typeText = (element, text) => {
      let typeInterval;
      element.textContent = '';
      let i = 0;
      typeInterval = setInterval(() => {
        if (i < text.length) {
          element.textContent += text.charAt(i);
          i++;
        } else {
          clearInterval(typeInterval);
        }
      }, 35); // Velocidade da digitação
    };
    const typeTextWithClear = (element, text, intervalVar) => {
        if (intervalVar) clearInterval(intervalVar);
        element.textContent = '';
        let i = 0;
        const newInterval = setInterval(() => {
            if (i < text.length) {
                element.textContent += text.charAt(i);
                i++;
            } else {
                clearInterval(newInterval);
            }
        }, 35);
        return newInterval;
    };
    const elogios = [
      "Você é incrível!", "Seu sorriso ilumina meu dia!", "Você faz tudo ficar melhor!",
      "Adoro conversar com você!", "Você é muito especial pra mim!", "Seu jeito é único e maravilhoso!",
      "Você é a melhor companhia!", "Você me inspira todos os dias!", "Seu carinho é tudo!",
      "Você é minha pessoa favorita!", "Você é mais forte do que imagina!", "Seu abraço é o melhor do mundo!",
      "Você merece o mundo!", "Você é linda por dentro e por fora!", "A patinha mais fofa do mundo kkkkk ",
      "Você tem um coração gigante!"
    ];
    $('#abrirElogioFromSection')?.addEventListener('click', () => {
      const elogioMsg = $('#elogioMsg');
      if (elogioMsg) {
        const randomElogio = elogios[Math.floor(Math.random() * elogios.length)] + " 💚";
        typeIntervalElogio = typeTextWithClear(elogioMsg, randomElogio, typeIntervalElogio);
      }
      openModal('#popupElogioBg');
    });
    $('#btnFecharElogio')?.addEventListener('click', () => closeModal('#popupElogioBg'));

    // Dica do Segredo
    $('#btnDicaSegredo')?.addEventListener('click', () => openModal('#popupDicaSegredoBg'));
    $('#btnFecharDicaSegredo')?.addEventListener('click', () => closeModal('#popupDicaSegredoBg'));

    // Segredo
    $('#abrirSegredo')?.addEventListener('click', () => openModal('#segredoModalBg'));
    $('#fecharModal')?.addEventListener('click', () => closeModal('#segredoModalBg'));
    $('#confirmarSegredo')?.addEventListener('click', () => {
      const input = $('#inputSegredo');
      const erro = $('#erroSegredo');
      if (!input || !erro) return;

      const v = input.value.trim().toLowerCase();
      if (v === 'inesperado') {
        closeModal('#segredoModalBg');
        setTimeout(() => { window.location.href = 'segredo.html'; }, 260);
      } else {
        erro.textContent = 'Palavra incorreta!';
        erro.style.display = 'block';
        setTimeout(() => { erro.style.display = 'none'; }, 2000);
      }
    });

    // Cartas "Abra Quando..."
    const letters = {
      saudades: {
        emoji: '💌',
        title: 'Abra quando sentir saudades...',
        content: 'Se a saudade bateu, saiba que a nossa conexão é especial e sempre valorizo os momentos que compartilhamos. Lembre-se das nossas risadas e conversas. Estou aqui se precisar, torcendo sempre por você. Um abraço! 💚'
      },
      desanimada: {
        emoji: '✨',
        title: 'Abra quando estiver desanimada...',
        content: 'Ei, cabeça erguida! Sei que às vezes as coisas parecem difíceis, mas você é uma das pessoas mais fortes que conheço. Lembre-se do seu valor e de tudo que já conquistou. Essa fase vai passar. Continue focando em você, que é o mais importante agora. Estou na torcida, sempre!'
      },
      feliz: {
        emoji: '🎉',
        title: 'Abra quando estiver muito feliz...',
        content: 'Que demais saber que você está feliz! Sua alegria é contagiante. Aproveite muito esse sentimento, você merece toda a felicidade do mundo. Comemore suas conquistas e saiba que fico muito feliz por você! Um brinde a esse momento!'
      }
    };

    $$('.letter-buttons button').forEach(btn => {
      btn.addEventListener('click', () => {
        const letterKey = btn.dataset.letter;
        const letterData = letters[letterKey];
        if (letterData) {
          $('#letterEmoji').textContent = letterData.emoji;
          typeIntervalLetterTitle = typeTextWithClear($('#letterTitle'), letterData.title, typeIntervalLetterTitle);
          typeIntervalLetterContent = typeTextWithClear($('#letterContent'), letterData.content, typeIntervalLetterContent);
          openModal('#letterModal');
        }
      });
    });
    $('#btnFecharLetter')?.addEventListener('click', () => closeModal('#letterModal'));

    // Dog Info Modal
    const dogInfoIcon = $('#dog-info-icon');
    if (dogInfoIcon) {
      dogInfoIcon.addEventListener('click', () => openModal('#dogInfoModal'));
      dogInfoIcon.addEventListener('mouseover', () => { dogInfoIcon.style.color = 'var(--accent)'; dogInfoIcon.style.borderColor = 'var(--accent)'; });
      dogInfoIcon.addEventListener('mouseout', () => { dogInfoIcon.style.color = 'var(--muted)'; dogInfoIcon.style.borderColor = 'var(--muted)'; });
    }
    $('#btnFecharDogInfo')?.addEventListener('click', () => closeModal('#dogInfoModal'));
  }; 

  // --- Módulo do Jogo Flap Bird ---
  const initGames = () => {
    const modalJoguinho = document.getElementById('modalJoguinho');
    const fecharJoguinho = document.getElementById('fecharJoguinho');
    const gameTitle = document.getElementById('gameTitle');
    const btnIniciarJogo = document.getElementById('btnIniciarJogo');
    const gameMsg = document.getElementById('gameMsg');

    // Canvases
    const flapCanvas = document.getElementById('flapCanvas');
    const gameCanvas = document.getElementById('gameCanvas');

    let activeGameStop = null;

    const openGameModal = (title, startFunction, canvasToShow) => {
      document.body.dispatchEvent(new CustomEvent('game-active-change', { detail: { active: true } }));
      document.body.classList.add('game-active');
      gameTitle.textContent = title;
      gameMsg.innerHTML = '';
      modalJoguinho.style.display = 'flex';
      btnIniciarJogo.style.display = 'block';
      btnIniciarJogo.textContent = 'Iniciar';
      flapCanvas.style.display = 'none';
      gameCanvas.style.display = 'none';

      btnIniciarJogo.onclick = () => {
        btnIniciarJogo.style.display = 'none';
        gameMsg.innerHTML = '';
        canvasToShow.style.display = 'block';
        activeGameStop = startFunction();
      };
    };

    $('#btnAbrirFlapBird')?.addEventListener('click', () => {
      openGameModal('Joguinho Flap Bird', startFlapBirdGame, flapCanvas);
    });

    $('#btnAbrirDinoDuck')?.addEventListener('click', () => {
      openGameModal('Corrida Doce da Mariane 🦆', startDinoDuckGame, gameCanvas);
    });

    fecharJoguinho.onclick = () => {
      document.body.dispatchEvent(new CustomEvent('game-active-change', { detail: { active: false } }));
      document.body.classList.remove('game-active');
      modalJoguinho.style.display = 'none';
      if (activeGameStop) {
        activeGameStop();
        activeGameStop = null;
      }
    };

    // --- Flap Bird Logic ---
    function startFlapBirdGame() {
        let flapInterval, flapScore, flapBird, flapPipes, flapGravity, flapGameOver;
        const ctx = flapCanvas.getContext('2d');
        flapScore = 0;
        flapBird = { x: 50, y: 160, vy: 0 };
        flapPipes = [{ x: 260, gap: Math.random()*80+90 }];
        flapGravity = 0.28;
        flapGameOver = false;
        document.body.style.overflow = 'hidden';
        let flapSpeed = 1.7; // velocidade inicial

        function drawFlap() {
            ctx.clearRect(0,0,240,320);
            ctx.fillStyle = "#a5d6a7";
            ctx.fillRect(0,0,240,320);
            ctx.save();
            ctx.translate(flapBird.x, flapBird.y);
            ctx.scale(-1, 1); // Espelha o pato para a direita
            ctx.font = '24px sans-serif';
            ctx.fillText('🦆', -12, 8);
            ctx.restore();
            ctx.fillStyle = "#43a047";
            flapPipes.forEach(pipe => {
                ctx.fillRect(pipe.x, 0, 32, pipe.gap-55);
                ctx.fillRect(pipe.x, pipe.gap+55, 32, 320-(pipe.gap+55));
            });
            ctx.font = "bold 1.2em 'Pacifico', cursive";
            ctx.fillStyle = "#388e3c";
            ctx.fillText("Pontos: "+flapScore, 10, 28);
        }
        function updateFlap() {
            if (flapGameOver) return;
            flapBird.vy += flapGravity;
            flapBird.y += flapBird.vy;
            for(let i=0;i<flapPipes.length;i++){
                flapPipes[i].x -= flapSpeed; // velocidade variável
            }
            if(flapPipes[flapPipes.length-1].x < 120){
                flapPipes.push({ x: 260, gap: Math.random()*80+90 });
            }
            if(flapPipes[0].x < -32) flapPipes.shift();
            for(let pipe of flapPipes){
                if(pipe.x < flapBird.x+12 && pipe.x+32 > flapBird.x-12){
                    if(flapBird.y-12 < pipe.gap-55 || flapBird.y+12 > pipe.gap+55){
                        flapGameOver = true;
                    }
                }
                if(!pipe.pontuado && pipe.x+32 < flapBird.x-12){
                    flapScore++;
                    pipe.pontuado = true;
                }
            }
            if(flapBird.y > 320-12 || flapBird.y < 12){
                flapGameOver = true;
            }
            if (flapSpeed < 4) {
                flapSpeed += 0.002; // ajuste para acelerar devagar
            }
            drawFlap();
            if (flapGameOver) {
                stopFlapBirdGame();
                gameMsg.innerHTML = `Fim de jogo!<br>Sua pontuação: <b>${flapScore}</b><br><span style="font-size:1.1em;">Me manda print! 😄</span>`;
                btnIniciarJogo.style.display = 'block';
                btnIniciarJogo.textContent = 'Jogar de Novo';
            }
        }
        function flap() {
            if(!flapGameOver){
                flapBird.vy = -5;
            }
        }
        const eventHandler = (e) => { e.preventDefault(); flap(); };
        flapCanvas.onclick = eventHandler;
        flapCanvas.ontouchstart = eventHandler;
        document.onkeydown = (e) => { if(e.code==="Space") flap(); };
        flapInterval = setInterval(updateFlap, 1000/50);
        drawFlap();
        
        const stopFlapBirdGame = () => {
            clearInterval(flapInterval);
            document.onkeydown = null;
            document.body.style.overflow = '';
        };
        return stopFlapBirdGame;
    }

    // --- Dino Duck Logic ---
    function startDinoDuckGame() {
        let animationFrameId, score, player, obstacles, sweets, gravity, gameOver, gameSpeed;
        const ctx = gameCanvas.getContext('2d');
        score = 0;
        gameSpeed = 160; // Velocidade inicial em pixels por segundo
        gravity = 0.4; // Gravidade por frame (será normalizada)
        gameOver = false;
        player = { x: 50, y: 160, width: 30, height: 30, vy: 0, isJumping: false };
        obstacles = [];
        sweets = [];
        document.body.style.overflow = 'hidden';
        let lastTime = 0;

        function updateDino(timestamp) {
            if (gameOver) return;
            const deltaTime = (timestamp - lastTime) / 1000; // DeltaTime em segundos
            lastTime = timestamp || 0;
            if (deltaTime > 0.03) { animationFrameId = requestAnimationFrame(updateDino); return; }

            const gravityPerSecond = gravity * 60;
            player.vy += gravityPerSecond * deltaTime;
            player.y += player.vy * 60 * deltaTime;
            if (player.y > gameCanvas.height - player.height - 10) {
                player.y = gameCanvas.height - player.height - 10;
                player.vy = 0;
                player.isJumping = false;
            }
            if (Math.random() < 0.02 && obstacles.length < 3 && (obstacles.length === 0 || obstacles[obstacles.length - 1].x < gameCanvas.width - 200)) {
                obstacles.push({ x: gameCanvas.width, width: 25, height: 25 });
            }
            if (Math.random() < 0.015) {
                const sweetTypes = ['🍬', '🍭'];
                sweets.push({ x: gameCanvas.width, y: Math.random() * 80 + 60, type: sweetTypes[Math.floor(Math.random() * sweetTypes.length)] });
            }
            obstacles.forEach((obs, index) => {
                obs.x -= gameSpeed * deltaTime;
                if (obs.x + obs.width < 0) obstacles.splice(index, 1);
                // Lógica de colisão específica para os obstáculos no chão
                // Colisão um pouco mais permissiva
                if (player.x < obs.x + obs.width - 5 && // -5 para dar uma margem
                    player.x + player.width - 5 > obs.x && // -5 para dar uma margem
                    player.y + player.height > gameCanvas.height - obs.height + 5) // +5 para dar uma margem
                {
                    gameOver = true;
                }
            });
            sweets.forEach((sweet, index) => {
                sweet.x -= gameSpeed * deltaTime;
                if (sweet.x < -20) sweets.splice(index, 1);
                if (checkCollision(player, { ...sweet, width: 20, height: 20 })) {
                    score += 10;
                    sweets.splice(index, 1);
                }
            });
            // gameSpeed += 0.5; // Velocidade constante a pedido do usuário
            drawDino();
            if (gameOver) {
                stopDinoDuckGame();
                gameMsg.innerHTML = `Fim de jogo!<br>Sua pontuação: <b>${score}</b><br><span style="font-size:1.1em;">Me manda print! 😄</span>`;
                btnIniciarJogo.style.display = 'block';
                btnIniciarJogo.textContent = 'Tentar Novamente';
            }

            animationFrameId = requestAnimationFrame(updateDino);
        }
        function drawDino() {
            ctx.clearRect(0, 0, gameCanvas.width, gameCanvas.height);
            ctx.fillStyle = "#a5d6a7";
            ctx.fillRect(0, 0, gameCanvas.width, gameCanvas.height);
            ctx.fillStyle = "#4caf50";
            ctx.fillRect(0, gameCanvas.height - 10, gameCanvas.width, 10);
            ctx.save();
            ctx.translate(player.x + player.width / 2, player.y + player.height / 2);
            ctx.scale(-1, 1); // Espelha o pato para a direita
            ctx.font = '24px sans-serif';
            ctx.fillText('🦆', -player.width / 2, player.height / 2);
            ctx.restore();
            obstacles.forEach(obs => {
                ctx.fillText('🌳', obs.x, gameCanvas.height - 5);
            });
            sweets.forEach(sweet => {
                ctx.fillText(sweet.type, sweet.x, sweet.y);
            });
            ctx.font = "bold 1.2em 'Pacifico', cursive";
            ctx.fillStyle = "#388e3c";
            ctx.fillText("Pontos: " + score, 10, 28);
        }
        function jump() {
            if (!player.isJumping && !gameOver) {
                player.vy = -10;
                player.isJumping = true;
            }
        }
        function checkCollision(rect1, rect2) {
            return rect1.x < rect2.x + rect2.width &&
                   rect1.x + rect1.width > rect2.x &&
                   rect1.y < rect2.y + rect2.height &&
                   rect1.y + rect1.height > rect2.y;
        }

        const eventHandler = (e) => { e.preventDefault(); jump(); };
        gameCanvas.onclick = eventHandler;
        gameCanvas.ontouchstart = eventHandler;
        document.onkeydown = (e) => { if (e.code === "Space") jump(); };
        animationFrameId = requestAnimationFrame(updateDino);
        drawDino();

        const stopDinoDuckGame = () => {
            if (animationFrameId) cancelAnimationFrame(animationFrameId);
            document.onkeydown = null;
            document.body.style.overflow = '';
        };
        return stopDinoDuckGame;
    }
  };
    // --- Clicker Game Logic ---
    function startClickerGame() {
        const ctx = clickerCanvas.getContext('2d');
        let score, timeLeft, items, gameOver;
        let animationFrameId, timerInterval, spawnInterval;

        function init() {
            score = 0;
            timeLeft = 30;
            items = [];
            gameOver = false;
            document.body.style.overflow = 'hidden';

            animationFrameId = requestAnimationFrame(gameLoop);
            timerInterval = setInterval(updateTimer, 1000);
            spawnInterval = setInterval(spawnItem, 600); // Gera um item a cada 600ms

            clickerCanvas.addEventListener('click', handleInteraction);
            clickerCanvas.addEventListener('touchstart', handleInteraction);
        }

        function stopGame() {
            if (animationFrameId) cancelAnimationFrame(animationFrameId);
            clearInterval(timerInterval);
            clearInterval(spawnInterval);
            clickerCanvas.removeEventListener('click', handleClick);
            clickerCanvas.removeEventListener('click', handleInteraction);
            clickerCanvas.removeEventListener('touchstart', handleInteraction);
            gameOver = true;

            gameMsg.innerHTML = `Tempo esgotado!<br>Sua pontuação final: <b>${score}</b><br><span style="font-size:1.1em;">Me manda print! 😄</span>`;
            btnIniciarJogo.style.display = 'block';
            btnIniciarJogo.textContent = 'Jogar de Novo';
        }

        function spawnItem() {
            if (gameOver) return;
            const itemTypes = [
                { type: '❤️', value: 1, probability: 0.6 },
                { type: '💚', value: 2, probability: 0.2 },
                { type: '💣', value: -1, probability: 0.2 }
            ];
            const rand = Math.random();
            let cumulativeProb = 0;
            let selectedType;

            for (const itemType of itemTypes) {
                cumulativeProb += itemType.probability;
                if (rand <= cumulativeProb) {
                    selectedType = itemType;
                    break;
                }
            }

            items.push({
                type: selectedType.type,
                value: selectedType.value,
                x: Math.random() * (clickerCanvas.width - 40) + 20,
                y: Math.random() * (clickerCanvas.height - 60) + 40, // Não aparecer muito no topo
                size: 30,
                createdAt: Date.now()
            });
        }

        function updateTimer() {
            if (gameOver) return;
            timeLeft--;
            if (timeLeft <= 0) {
                stopGame();
            }
        }

        const handleInteraction = (e) => {
            e.preventDefault();
            if (gameOver) return;
            const rect = clickerCanvas.getBoundingClientRect();
            const touch = e.touches ? e.touches[0] : e;
            const x = touch.clientX - rect.left;
            const y = touch.clientY - rect.top;

            for (let i = items.length - 1; i >= 0; i--) {
                const item = items[i];
                const distance = Math.sqrt(Math.pow(x - item.x, 2) + Math.pow(y - item.y, 2));
                if (distance < item.size / 2) {
                    if (item.value === -1) { // Bomba
                        stopGame();
                        gameMsg.innerHTML = `BOOM! 💣 Fim de jogo!<br>Sua pontuação: <b>${score}</b>`;
                        return;
                    }
                    score += item.value;
                    items.splice(i, 1);
                    return;
                }
            }
        }

        function gameLoop() {
            if (gameOver) return;
            ctx.clearRect(0, 0, clickerCanvas.width, clickerCanvas.height);
            items = items.filter(item => Date.now() - item.createdAt < 2000); // Itens somem depois de 2s
            items.forEach(item => { ctx.font = `${item.size}px sans-serif`; ctx.fillText(item.type, item.x - item.size/2, item.y + item.size/2); });
            ctx.font = "bold 1.2em 'Pacifico', cursive"; ctx.fillStyle = "#388e3c";
            ctx.fillText(`Pontos: ${score}`, 10, 28); ctx.fillText(`Tempo: ${timeLeft}`, clickerCanvas.width - 110, 28);
            animationFrameId = requestAnimationFrame(gameLoop);
        }

        init();
        return stopGame;
    }

  // --- Módulo de Efeitos Visuais ---
  const initVisualEffects = () => {
    let shootingStarInterval, sparklesActive = true;
    // Efeito de brilho no cursor
    const sparkleHandler = (e) => {
        if (!sparklesActive) return;

        const sparkle = document.createElement('div');
        sparkle.className = 'sparkle';
        document.body.appendChild(sparkle);

        sparkle.style.left = `${e.clientX}px`;
        sparkle.style.top = `${e.clientY}px`;

        setTimeout(() => sparkle.remove(), 600);
    };
    document.addEventListener('mousemove', sparkleHandler);

    document.body.addEventListener('game-active-change', (e) => {
        sparklesActive = !e.detail.active;
    });


    // Efeito Parallax
    const parallaxLayers = $$('.parallax-layer');
    const initParallax = () => {
        // Desativa o parallax em telas pequenas para performance
        if (window.innerWidth < 768) return;

        document.addEventListener('mousemove', (e) => {
            const x = (e.clientX / window.innerWidth - 0.5) * 2; // -1 to 1
            const y = (e.clientY / window.innerHeight - 0.5) * 2; // -1 to 1

            parallaxLayers.forEach(layer => {
                const speed = layer.dataset.speed;
                layer.style.transform = `translateX(${x * -speed * 4}px) translateY(${y * -speed * 4}px)`;
            });
        });
    };

    // Efeito de Estrela Cadente
    const createShootingStar = () => {
        const star = document.createElement('div');
        star.className = 'shooting-star';
        $('#cssWallpaper').appendChild(star);

        star.style.left = `${Math.random() * 100 + 50}%`;
        star.style.top = `${Math.random() * 60 - 30}%`;
        star.style.width = `${Math.random() * 150 + 100}px`;
        star.style.animationDuration = `${Math.random() * 2 + 3}s`;

        setTimeout(() => star.remove(), 5000);
    };
    
    const startShootingStars = () => {
        if (!shootingStarInterval) {
            shootingStarInterval = setInterval(createShootingStar, 6000);
        }
    };
    
    document.body.addEventListener('game-active-change', (e) => {
        if (e.detail.active) {
            clearInterval(shootingStarInterval);
            shootingStarInterval = null;
        } else {
            startShootingStars();
        }
    });
    startShootingStars();
    initParallax();

    // Efeito do Cachorro Observador
    const lookingDog = $('#looking-dog');
    const pupils = $$('.dog-pupil');

    // --- Lógica da Missão do Cachorro ---
    const foodBowl = $('#dog-food-bowl');
    const streakCountEl = $('#dog-streak-count');

    const checkMidnight = () => {
        const now = new Date();
        const msUntilMidnight = new Date(now.getFullYear(), now.getMonth(), now.getDate() + 1, 0, 0, 0, 0) - now;
        setTimeout(() => {
            // À meia-noite, reinicia a missão e depois agenda a próxima verificação
            initDogMission();
            checkMidnight();
        }, msUntilMidnight + 1000); // Adiciona 1 segundo de margem
    };

    const canFeedToday = () => {
        return localStorage.getItem('dogLastFedDate') !== getToday();
    };

    const getToday = () => new Date().toISOString().split('T')[0];

    const initDogMission = () => {
      if (!foodBowl || !streakCountEl) return;

      let lastFedDate = localStorage.getItem('dogLastFedDate');
      let streak = parseInt(localStorage.getItem('dogFeedStreak') || '0');
      const today = getToday();

      if (lastFedDate) {
        const yesterday = new Date();
        yesterday.setDate(yesterday.getDate() - 1);
        const yesterdayStr = yesterday.toISOString().split('T')[0];

        // Se não alimentou ontem nem hoje, zera a sequência
        if (lastFedDate !== yesterdayStr && lastFedDate !== today) {
          streak = 0;
          localStorage.setItem('dogFeedStreak', '0');
        }
      }

      streakCountEl.textContent = streak;

      if (!canFeedToday()) {
        foodBowl.classList.add('fed');
        foodBowl.textContent = '😋'; // Mostra que já comeu
      } else {
        foodBowl.classList.remove('fed');
        foodBowl.textContent = '🥣';
      }

      foodBowl.addEventListener('click', () => {
        if (!canFeedToday()) return;

        // Animação de comer
        lookingDog.style.animation = 'dog-eat 1s ease-in-out';
        setTimeout(() => { lookingDog.style.animation = ''; }, 1000);

        const newStreak = (localStorage.getItem('dogLastFedDate') === new Date(new Date().setDate(new Date().getDate() - 1)).toISOString().split('T')[0]) ? streak + 1 : 1;
        
        localStorage.setItem('dogLastFedDate', getToday());
        localStorage.setItem('dogFeedStreak', newStreak.toString());
        streakCountEl.textContent = newStreak;
        
        foodBowl.classList.add('fed');
        foodBowl.textContent = '😋';
      });
    };
    checkMidnight(); // Inicia a verificação da meia-noite

    if (lookingDog && pupils.length > 0) {
      const eyeCenters = [ { x: 48, y: 65 }, { x: 82, y: 65 } ]; // Posição central dos olhos no SVG
      const maxPupilMove = 3; // O quanto a pupila pode se mover do centro

      document.addEventListener('mousemove', (e) => {
        const dogRect = lookingDog.getBoundingClientRect();
        
        pupils.forEach((pupil, index) => {
            const eyeCenterX = dogRect.left + (eyeCenters[index].x / 130) * dogRect.width;
            const eyeCenterY = dogRect.top + (eyeCenters[index].y / 110) * dogRect.height;

            const deltaX = e.clientX - eyeCenterX;
            const deltaY = e.clientY - eyeCenterY;
            const angle = Math.atan2(deltaY, deltaX);

            const moveX = Math.cos(angle) * maxPupilMove;
            const moveY = Math.sin(angle) * maxPupilMove;
            
            pupil.style.transform = `translate(${moveX}px, ${moveY}px)`;
        });
      });

      // Animação de carinho ao clicar no cachorro
      lookingDog.addEventListener('click', (e) => {
        e.stopPropagation(); // Impede que o clique se propague para o document
        lookingDog.style.animation = 'dog-pet 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94)';
        setTimeout(() => { lookingDog.style.animation = ''; }, 600);
      });

      // Animação de pulo ao clicar em qualquer outro lugar
      document.addEventListener('click', (e) => {
          // Apenas a animação de pulo, sem virar de lado
          lookingDog.style.animation = 'dog-jump 0.5s ease-out';
          setTimeout(() => { lookingDog.style.animation = ''; }, 500);
      });
    }
    initDogMission();
  };

  // --- Inicialização ---
  // Esconde todos os modais no início
  $$('.hidden').forEach(el => el.classList.add('hidden'));
  
  initIntro();
});
</script>
</body>
</html>
